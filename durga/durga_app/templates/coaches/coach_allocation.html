{% load static %}
<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Playalong</title>
	<link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
	<link href="{% static 'css/global.css' %}" rel="stylesheet">
	<link href="{% static 'css/index.css' %}" rel="stylesheet">
	<link href="{% static 'css/element.css' %}" rel="stylesheet">
	<link rel="{% static 'stylesheet' %}" type="text/css" href="css/font-awesome.min.css" />
	<link href="{% static 'https://fonts.googleapis.com/css?family=Alata&display=swap' %}" rel="stylesheet">
	<script src="{% static 'js/jquery-2.1.1.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
	<script src="{% static 'js/ekko-lightbox.js' %}"></script>
  </head>

<body data-spy="scroll" data-target=".navbar" data-offset="50">

<section id="header">
	<nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html"><i class="fa fa-trophy"></i> <span class="col">Sports</span> Team</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
    <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
            <a href="#" class="dropdown-toggle m_tag" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Enquiry <span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a href="{% url 'enquiry_form' %}" class="pl-4">Enquiry Form</a></li>
                <li><a href="{% url 'enquiry_list' %}" class="pl-4">Enquiry List</a></li>
            </ul>
        </li>
        <li class="dropdown">
            <a href="#" class="dropdown-toggle m_tag" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Admission <span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a href="{% url 'register' %}" class="pl-4">Admission_Form</a></li>
            <li><a href="{% url 'admission_list' %}"  class="pl-4">Admission_list</a></li>
            <li><a href="{% url 'sessions' %}"  class="pl-4">Add Sessions</a></li>
            </ul>
        </li>
        <li class="dropdown">
            <a href="#" class="dropdown-toggle m_tag" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Coach <span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a href="{% url 'coach_reg' %}" class="pl-4">Coach_Reg</a></li>
            <li><a href="{% url 'player_name' %}"  class="pl-4">Coach_Allocation</a></li>
            </ul>
        </li>

    </ul>
</div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>
</section>
<br><br><br><br>
<body>
    <div class="container">
        <h2 class="text-center mb-4">Coach Allocation Form</h2>
        <form method="post">
            {% csrf_token %}
            <div class="form-row form-group">
                <div class="col-md-6">
                    <label for="first_name">Player Name:</label>
                    <select id="first_name" name="first_name" class="form-control" required>
                        <option value="">Select Player</option>
                        {% for name in rName %}
                            <option value="{{ name.first_name }}">{{ name.first_name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="form-row form-group">
                <div class="col-md-6">
                    <label for="last_name">Last Name:</label>
                    <input type="text" id="last_name" name="last_name" class="form-control" readonly>
                </div>
                <div class="col-md-6">
                    <label for="session">Session:</label>
                    <input type="text" id="session" name="session" class="form-control" readonly>
                </div>
                <div class="col-md-6">
                    <label for="batchtime">Batch:</label>
                    <input type="text" id="batchtime" name="batchtime" class="form-control" readonly>
                </div>
            </div>
            <div class="form-row form-group">
                <div class="col-md-6">
                    <label for="coachname">Coach Name:</label>
                    <select id="coachname" name="coachname" class="form-control" required>
                        <option value="">Select Coach</option>
                        {% for cname in cName %}
                            <option value="{{ cname.coachname }}">{{ cname.coachname }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-6">
                    <label for="coachType">Coach Type:</label>
                    <input type="text" id="coachType" name="coachType" class="form-control" readonly>
                </div>
            </div><br>
            <div class="text-center">
                <button type="submit" class="btn btn-primary">Submit</button>
            </div>
        </form>
    </div>
<br><br><br><br><br><br><br><br><br>
    <section id="footer_bottom">
 <div class="container">
   <div class="row">
    <div class="footer_bottom_1 clearfix">
	 <div class="col-sm-6">
	  <div class="footer_bottom_1i1 clearfix">
	    <p class="col_3">Â© 2013 Your Website Name. All Rights Reserved | Design by <a class="col_1" href="http://www.templateonweb.com">TemplateOnWeb</a></p>
	  </div>
	 </div>
	 <div class="col-sm-3">
	  <div class="footer_bottom_1i2 text-center clearfix">
	    <ul class="social-network social-circle mgt">
		<li><a href="#" class="icoRss" title="Rss"><i class="fa fa-rss"></i></a></li>
		<li><a href="#" class="icoFacebook" title="Facebook"><i class="fa fa-facebook"></i></a></li>
		<li><a href="#" class="icoTwitter" title="Twitter"><i class="fa fa-twitter"></i></a></li>
		<li><a href="#" class="icoGoogle" title="Google +"><i class="fa fa-google-plus"></i></a></li>
		<li><a href="#" class="icoLinkedin" title="Linkedin"><i class="fa fa-linkedin"></i></a></li>
      </ul>
	  </div>
	 </div>
	 <div class="col-sm-3">
	  <div class="footer_bottom_1i3 text-right clearfix">
	   <h6 class="col_2">
<a class="col_3" href="#">PRIVACY POLICY</a> | <a class="col_3" href="#">TERMS & CONDITIONS</a></h6>
	  </div>
	 </div>
	</div>
   </div>
 </div>
</section>

<div id="toTop" class="btn btn-info" style="display: block; background:#d40722; color:#fff; border:none;"><span class="fa fa-chevron-up"></span></div>

<script>!-- JavaScript -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#first_name').change(function() {
                var first_name = $(this).val();
                if (first_name) {
                    $.ajax({
                        type: 'POST',
                        url: "{% url 'fetch_name_data' %}",
                        data: {
                            'first_name': first_name,
                            'csrfmiddlewaretoken': '{{ csrf_token }}'
                        },
                        success: function(response) {
                            if (response.error) {
                                alert(response.error);
                            } else {
                                $('#last_name').val(response.last_name);
                                $('#session').val(response.session);
                                $('#batchtime').val(response.batchtime)
                            }
                        },
                        error: function() {
                            alert('An error occurred while fetching player data.');
                        }
                    });
                } else {
                    $('#last_name').val('');
                    $('#session').val('');
                    $('#batchtime').val('');
                }
            });

            $('#coachname').change(function() {
                var coachname = $(this).val();
                if (coachname) {
                    $.ajax({
                        type: 'POST',
                        url: "{% url 'fetch_coach_data' %}",
                        data: {
                            'coachname': coachname,
                            'csrfmiddlewaretoken': '{{ csrf_token }}'
                        },
                        success: function(response) {
                            if (response.error) {
                                alert(response.error);
                            } else {
                                $('#coachType').val(response.coachType);
                            }
                        },
                        error: function() {
                            alert('An error occurred while fetching coach data.');
                        }
                    });
                } else {
                    $('#coachType').val('');
                }
            });
        });
    </script>
</body>
</html>
